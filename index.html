<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="refresh" content="3600" />

        <title>Presentation</title>
        <link rel="stylesheet" href="css/style.css" />
    </head>
    <body onload="startTime()">
        <iframe
            src="https://docs.google.com/presentation/d/e/2PACX-1vQbS6bGPlyTibcjsUPI1uHspUBsRSv_z_dVast1ZTcZ9Qt_GqXeHU0xWxluPZ2yCL9kftF0frYksy2h/embed?start=true&loop=true&delayms=10000&rm=minimal"
        ></iframe>
        <footer>
            <!-- <img style="filter: invert()" src="resources/images/logo.svg" alt="" /> -->
            <section id="food-schedule" title="Food schedule"></section>
            <section id="clock" title="Digital Clock"></section>
        </footer>

        <script title="Clock">
            function startTime() {
                const today = new Date();
                let h = today.getHours();
                let m = today.getMinutes();
                let s = today.getSeconds();
                m = checkTime(m);
                s = checkTime(s);
                document.getElementById("clock").innerHTML = h + ":" + m;
                setTimeout(startTime, 1000);
            }

            function checkTime(i) {
                if (i < 10) {
                    i = "0" + i;
                } // add zero in front of numbers < 10
                return i;
            }
        </script>

        <script title="Food schedule">
            AddFoodSchedule(3);
            function AddFoodSchedule(numDays) {
                baseUrl = "https://www.skolmaten.se/nosnasgymnasiet/rss/days/";

                for (let index = 0; index < numDays; index++) {
                    url = `${baseUrl}?offset=${index}`;

                    const request3 = fetch(url)
                        .then((response) => response.text())
                        .then((str) => new window.DOMParser().parseFromString(str, "text/xml"))
                        .then((data) => {
                            const title = document.createElement("h3");
                            title.text = data.getElementsByTagName("title").text;

                            const body = document.createElement("p");
                            body.text = data.getElementsByTagName("description").text;

                            const section = document.createElement("section");
                            section.appendChild(title);
                            section.appendChild(body);

                            const foodScheduleContainer = document.getElementById("food-schedule");
                            foodScheduleContainer.appendChild(section);
                        });
                }
            }
        </script>
    </body>
</html>
